--- operator.c	2009-09-02 16:41:51.000000000 -0700
+++ operator.c.new	2009-09-02 16:43:19.000000000 -0700
@@ -48,7 +48,12 @@
 	ALLOC_INIT_ZVAL(caller);
 	array_init(caller);
 
+	#if (PHP_MAJOR_VERSION > 5 && PHP_MINOR_VERSION >= 3) 
+	Z_ADDREF_P(op1);
+	#else
 	ZVAL_ADDREF(op1);
+	#endif
+	
 	add_index_zval(caller, 0, op1);
 	add_index_stringl(caller, 1, (char*)method, method_len, 1);
 
